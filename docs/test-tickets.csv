ID,Title,Category,Risk,Labels,Steps,Expected Result
F-001,[TEST] Create fight with valid stake,Fight System - Creation,HIGH,"test,fight-system,critical","1. Connect wallet 2. Auth 3. Click Create Fight 4. Enter valid stake 5. Confirm","Fight created with status PENDING, creator as participantA"
F-002,[TEST] Create fight with stake > balance,Fight System - Creation,MEDIUM,"test,fight-system,medium","1. Auth 2. Create fight with stake exceeding USDC balance","Error: Insufficient balance"
F-003,[TEST] Create fight with stake below minimum,Fight System - Creation,LOW,"test,fight-system,low","1. Auth 2. Create fight with stake < $1","Error: Minimum stake is $1"
F-004,[TEST] Create fight without Pacifica connection,Fight System - Creation,MEDIUM,"test,fight-system,medium","1. Auth without Pacifica linked 2. Try to create fight","Error: Please connect Pacifica account first"
F-010,[TEST] Join pending fight,Fight System - Joining,HIGH,"test,fight-system,critical","1. Auth as User B 2. Find PENDING fight 3. Click Join","Fight status → READY, participantB set, countdown starts"
F-011,[TEST] Join own fight,Fight System - Joining,MEDIUM,"test,fight-system,medium","1. Auth 2. Create fight 3. Try to join own fight","Error: Cannot join your own fight"
F-014,[TEST] Creator notification on join,Fight System - Joining,MEDIUM,"test,fight-system,medium","1. Create fight as User A 2. Join as User B","User A receives notification that opponent joined"
F-020,[TEST] Fight countdown to start,Fight System - Lifecycle,HIGH,"test,fight-system,critical","1. Create & join fight 2. Wait for countdown","After countdown (30s default), status → LIVE"
F-022,[TEST] Fight end - clear winner,Fight System - Lifecycle,HIGH,"test,fight-system,critical","1. Complete fight 2. One user has higher PnL%","Winner determined, fight status → COMPLETED"
F-023,[TEST] Fight end - draw (EPSILON),Fight System - Lifecycle,HIGH,"test,fight-system,critical","1. Complete fight 2. Both users within 0.0001% PnL","Draw declared, stakes returned"
F-030,[TEST] Snapshot on fight create,Fight System - Initial Snapshot,CRITICAL,"test,fight-system,critical,pre-fight","1. Have open positions 2. Create fight","initialPositions JSON saved for creator"
F-031,[TEST] Snapshot on fight join,Fight System - Initial Snapshot,CRITICAL,"test,fight-system,critical,pre-fight","1. Have open positions 2. Join fight","initialPositions JSON saved for joiner"
T-001,[TEST] Long market order,Trading System - Market Orders,HIGH,"test,trading-system,critical","1. Select symbol 2. Enter amount 3. Click Long","Position opened, order recorded in TfcOrderAction"
T-002,[TEST] Short market order,Trading System - Market Orders,HIGH,"test,trading-system,critical","1. Select symbol 2. Enter amount 3. Click Short","Position opened, order recorded"
T-003,[TEST] Market order during fight,Trading System - Market Orders,CRITICAL,"test,trading-system,critical,fight-integration","1. Be in LIVE fight 2. Place market order","Order has fightId, recorded in FightTrade if not closing pre-fight"
T-020,[TEST] Order within stake limit,Trading System - Stake Limit,HIGH,"test,trading-system,critical,stake-limit","1. In $100 stake fight 2. Place $50 order","Order succeeds"
T-021,[TEST] Order exceeds stake limit,Trading System - Stake Limit,CRITICAL,"test,trading-system,critical,stake-limit","1. In $100 stake fight 2. Place $150 order","Order rejected: Order exceeds fight stake limit"
T-022,[TEST] Cumulative orders at limit,Trading System - Stake Limit,CRITICAL,"test,trading-system,critical,stake-limit","1. In $100 fight 2. Place $60 order 3. Place $60 order","Second order rejected (total would exceed $100)"
PF-001,[TEST] Close pre-fight long during fight,Pre-Fight Position Exclusion,CRITICAL,"test,pre-flight,critical","1. Have 100 BTC long 2. Create/join fight 3. Close the 100 BTC","Trade NOT recorded in FightTrade, PnL excluded from fight"
PF-002,[TEST] Close pre-fight short during fight,Pre-Fight Position Exclusion,CRITICAL,"test,pre-fight,critical","1. Have 50 ETH short 2. Create/join fight 3. Close the 50 ETH","Trade NOT recorded in FightTrade"
PF-003,[TEST] Partial close of pre-fight,Pre-Fight Position Exclusion,CRITICAL,"test,pre-fight,critical","1. Have 100 BTC long (pre-fight) 2. Start fight 3. Close 60","60 excluded from fight, position now 40"
PF-004,[TEST] New position same symbol as pre-fight,Pre-Fight Position Exclusion,CRITICAL,"test,pre-fight,critical","1. Have 100 BTC long (pre-fight) 2. Start fight 3. Open 50 BTC short","The 50 short IS a fight trade (new position)"
PF-005,[TEST] Close pre-fight then reopen,Pre-Fight Position Exclusion,CRITICAL,"test,pre-fight,critical","1. Pre-fight: 100 BTC long 2. Start fight 3. Close 100 4. Open 100 BTC long","Close excluded, new open IS fight trade"
PF-010,[TEST] Pre-fight + fight position same symbol,Pre-Fight Mixed Positions,CRITICAL,"test,pre-fight,critical","1. Pre-fight: 100 BTC long 2. Start fight 3. Open 50 more BTC long","Total: 150 BTC, but only 50 counts for fight PnL"
PF-020,[TEST] Fight PnL excludes pre-fight,Pre-Fight PnL Calculation,CRITICAL,"test,pre-fight,critical,pnl","1. Pre-fight: +$50 unrealized 2. Start fight 3. Market moves +$20","Fight PnL = $20 (from fight trades only)"
PF-022,[TEST] Winner determined by fight PnL only,Pre-Fight PnL Calculation,CRITICAL,"test,pre-fight,critical,pnl","1. User A: pre-fight +$100, fight -$10 2. User B: no pre-fight, fight +$5","User B wins (fight PnL: +5% vs -10%)"
A-001,[TEST] Connect Phantom wallet,Authentication - Wallet,HIGH,"test,auth,critical","1. Click Connect 2. Select Phantom 3. Approve","Wallet connected, sign prompt appears"
A-002,[TEST] Sign authentication message,Authentication - Wallet,HIGH,"test,auth,critical","1. Connect wallet 2. Sign message","JWT token received, user authenticated"
A-010,[TEST] Refresh with same wallet,Authentication - Persistence,HIGH,"test,auth,critical,persistence","1. Auth 2. Refresh page","Should restore session (localStorage)"
A-011,[TEST] Switch wallet in extension,Authentication - Persistence,HIGH,"test,auth,critical,persistence","1. Auth with Wallet A 2. Switch to Wallet B in Phantom","Detect change, clear auth, prompt new sign"
RT-001,[TEST] WebSocket connect on fight start,Real-Time - WebSocket,HIGH,"test,realtime,critical","1. Join fight 2. Countdown ends","WebSocket connects to fight room"
RT-002,[TEST] WebSocket reconnect on disconnect,Real-Time - WebSocket,HIGH,"test,realtime,critical","1. In fight 2. Network blip 3. Reconnect","Auto-reconnect, resume updates"
RT-010,[TEST] PNL_TICK every second,Real-Time - PnL Updates,HIGH,"test,realtime,critical","1. In LIVE fight 2. Monitor updates","Receive PnL update every ~1 second"
E-001,[TEST] Two users join same fight simultaneously,Edge Cases - Concurrent,HIGH,"test,edge-case,critical","1. Fight PENDING 2. User B & C click join simultaneously","Only one succeeds, other gets error"
E-002,[TEST] Order during fight end,Edge Cases - Concurrent,HIGH,"test,edge-case,critical","1. Place order as fight timer hits 0","Order rejected or handled gracefully"
E-010,[TEST] Fight data matches DB,Edge Cases - Data Integrity,HIGH,"test,edge-case,data-integrity","1. Complete fight 2. Check UI vs DB","Winner, scores, timestamps match"
L-001,[TEST] Top 10 leaderboard display,Leaderboard,MEDIUM,"test,leaderboard,medium","1. View leaderboard","Shows top 10 by total winnings"
L-004,[TEST] Prize pool display,Leaderboard,MEDIUM,"test,leaderboard,medium","1. View leaderboard","Shows total prize pool from all fights"
